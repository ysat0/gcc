/* Copyright (C) 2012-2013 Free Software Foundation, Inc.

   This file is part of GCC.

   GCC is free software; you can redistribute it and/or modify it under
   the terms of the GNU General Public License as published by the Free
   Software Foundation; either version 3, or (at your option) any later
   version.

   GCC is distributed in the hope that it will be useful, but WITHOUT ANY
   WARRANTY; without even the implied warranty of MERCHANTABILITY or
   FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
   for more details.

   You should have received a copy of the GNU General Public License
   along with GCC; see the file COPYING3.  If not see
   <http://www.gnu.org/licenses/>.  */

/* This file contains the definitions and documentation for the
   builtins defined in the AVR part of the GNU compiler.
   Befor including this file, define a macro

   DEF_BUILTIN(NAME, N_ARGS, TYPE, ICODE)

   NAME:   `__builtin_avr_name' will be the user-level name of the builtin.
           `AVR_BUILTIN_NAME' will be the internal builtin's id.
   N_ARGS: Number of input arguments.  If special treatment is needed,
           set to -1 and handle it by hand, see avr.c:avr_expand_builtin().
   TYPE:   A tree node describing the prototype of the built-in.
   ICODE:  Name of attached insn or expander.  If special treatment in avr.c
           is needed to expand the built-in, use `nothing'.
*/

/* Mapped to respective instruction.  */

DEF_BUILTIN (NOP,  -1, void_ftype_void, nothing)
DEF_BUILTIN (SEI,   0, void_ftype_void, enable_interrupt)
DEF_BUILTIN (CLI,   0, void_ftype_void, disable_interrupt)
DEF_BUILTIN (WDR,   0, void_ftype_void, wdr)
DEF_BUILTIN (SLEEP, 0, void_ftype_void, sleep)

/* Mapped to respective instruction but might also be folded away
   or emit as libgcc call if ISA does not provide the instruction.  */

DEF_BUILTIN (SWAP,   1, uchar_ftype_uchar,      rotlqi3_4)
DEF_BUILTIN (FMUL,   2, uint_ftype_uchar_uchar, fmul)
DEF_BUILTIN (FMULS,  2, int_ftype_char_char,    fmuls)
DEF_BUILTIN (FMULSU, 2, int_ftype_char_uchar,   fmulsu)

/* More complex stuff that cannot be mapped 1:1 to an instruction.  */

DEF_BUILTIN (DELAY_CYCLES, -1, void_ftype_ulong, nothing)
DEF_BUILTIN (INSERT_BITS, 3, uchar_ftype_ulong_uchar_uchar, insert_bits)
DEF_BUILTIN (FLASH_SEGMENT, 1, char_ftype_const_memx_ptr, flash_segment)
